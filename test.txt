-- =========================
-- CUSTOMERS TABLE
-- =========================
CREATE TABLE customers (
    cust_id INT NOT NULL AUTO_INCREMENT,
    cust_name CHAR(50) NULL,
    cust_name_last CHAR(50) NULL,
    cust_address CHAR(50) NULL,
    cust_city CHAR(50) NULL,
    cust_state CHAR(50) NULL,
    cust_zip CHAR(50) NULL,
    cust_email CHAR(255) NULL,
    cust_password CHAR(255) NULL,
    PRIMARY KEY (cust_id)
) ENGINE=InnoDB;

-- =========================
-- ORDERS TABLE
-- =========================
CREATE TABLE orders (
    order_id INT NOT NULL AUTO_INCREMENT,
    cust_id INT NOT NULL,
    order_date DATETIME NOT NULL,
    PRIMARY KEY (order_id),
    CONSTRAINT fk_orders_customers
      FOREIGN KEY (cust_id)
      REFERENCES customers(cust_id)
      ON UPDATE CASCADE
      ON DELETE RESTRICT
) ENGINE=InnoDB;

-- =========================
-- PRODUCTS TABLE
-- =========================
CREATE TABLE products (
    product_id INT NOT NULL AUTO_INCREMENT,
    product_name TEXT NOT NULL,
    product_group INT NULL,
    product_price DOUBLE(5,2) NOT NULL,
    image_path VARCHAR(255) NULL DEFAULT '/images/placeholder.jpg',
    PRIMARY KEY (product_id)
) ENGINE=InnoDB;

-- =========================
-- ORDER_INFO TABLE
-- (Order details / line items)
-- =========================
CREATE TABLE order_info (
    info_id INT NOT NULL AUTO_INCREMENT,
    order_id INT NOT NULL,
    product_id INT NOT NULL,
    quantity INT NOT NULL DEFAULT 1,
    PRIMARY KEY (info_id),
    CONSTRAINT fk_orderinfo_orders
      FOREIGN KEY (order_id)
      REFERENCES orders(order_id)
      ON UPDATE CASCADE
      ON DELETE CASCADE,
    CONSTRAINT fk_orderinfo_products
      FOREIGN KEY (product_id)
      REFERENCES products(product_id)
      ON UPDATE CASCADE
      ON DELETE RESTRICT
) ENGINE=InnoDB;

-- =========================
-- PRODUCT_GROUP TABLE
-- =========================
CREATE TABLE product_group (
    group_id INT NOT NULL AUTO_INCREMENT,
    group_name TEXT NOT NULL,
    image_path VARCHAR(255) NULL DEFAULT '/images/placeholder.jpg',
    PRIMARY KEY (group_id)
) ENGINE=InnoDB;

-- (Optional) Add relation between products and product_group
ALTER TABLE products
ADD CONSTRAINT fk_products_group
FOREIGN KEY (product_group)
REFERENCES product_group(group_id)
ON UPDATE CASCADE
ON DELETE RESTRICT;
